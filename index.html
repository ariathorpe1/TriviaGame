<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>True / False Trivia</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios@1.13.2/dist/axios.min.js"></script>
</head>
<body>
  <main class="app">
    <header class="header">
      <h1 class="title">True / False Trivia</h1>
      <p class="subtitle">Decide quickly — is it true or false?</p>
    </header>

    <section class="game" aria-label="Trivia game">
      <!-- Question area (update this text with JS) -->
      <div id="question" class="question" aria-live="polite">
        [PLACEHOLDER]
      </div>

      <!-- Buttons for user input -->
      <div class="controls">
        <button id="trueBtn" class="btn true" type="button" aria-pressed="false">True</button>
        <button id="falseBtn" class="btn false" type="button" aria-pressed="false">False</button>
      </div>
  </main>

 <script>
    // Load a question when page loads
    $(document).ready(function () {
      loadQuestion();
    });

    // Fetch a batch of 10 questions and store them
    function fetchQuestions() {
      return axios
        .get("https://opentdb.com/api.php?amount=10&type=boolean")
        .then((res) => {
          const questions = res.data.results;
          localStorage.setItem("triviaQuestions", JSON.stringify(questions));
        });
    }

    // Load a single question
    function loadQuestion() {
      let stored = localStorage.getItem("triviaQuestions");

      // If no stored questions → fetch new batch
      if (!stored) {
        fetchQuestions().then(loadQuestion);
        return;
      }

      let questions = JSON.parse(stored);

      // If empty → fetch new batch
      if (questions.length === 0) {
        localStorage.removeItem("triviaQuestions");
        fetchQuestions().then(loadQuestion);
        return;
      }

      // Remove one question from the array
      const q = questions.shift();

      // Save remaining
      localStorage.setItem("triviaQuestions", JSON.stringify(questions));

      // Save correct answer in sessionStorage
      sessionStorage.setItem("correctAnswer", q.correct_answer);

      // Display the question text
      $("#question").html(q.question);
    }

    // Compare user choice to sessionStorage answer
    function checkAnswer(userAnswer) {
      const correct = sessionStorage.getItem("correctAnswer");

      if (userAnswer === correct) {
        alert("Correct!");
        loadQuestion();
      } else {
        alert("Try again");
      }
    }

    // Button handlers
    $("#trueBtn").click(function () {
      checkAnswer("True");
    });

    $("#falseBtn").click(function () {
      checkAnswer("False");
    });
  </script>
</body>
</html>
